<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

</head>
<body>
    
    <div id="vue">
        <!-- shopping cart -->
        <div v-if='showLesson'>
            <div class="nav" v-if="cart.length >= 1">
                <p>Items in Cart: {{ cart.length }}</p>
                <div id="nav-checkout" @click="showCart">
                    <img v-bind:src="shoppingCartIcon">
                    <p>Cart</p>
                </div>
            </div>

            <!-- sorting buttons -->


            <div id="sort-div">
                <!-- sort option -->
                Sort By:
                <select name="sortType" id="select" v-model="sortType">
                    <option value="subject">Subject</option>
                    <option value="location">Location</option>
                    <option value="price">Price</option>
                    <option value="spaces">Availability</option>
                </select>

                <!-- option for ascending/descending -->
                <select name="ascendingDescending" id="select" v-model="ascendingDescending">
                    <option value="ascending">Ascending</option>
                    <option value="descending">Descending</option>
                </select>

                <!-- search -->
                <input type="text" v-model="searchValue" placeholder="Search by Subject" id="search-input"></input>
            </div>

            
            <!-- lessons -->
            <div id="lesson-container">
                <div id="lesson-list" v-for="lesson in sortItems">
                    <img class="lesson-image" v-bind:src="lesson.image">
                    <p>Subject: {{lesson.subject}}</p>
                    <p>Location: {{lesson.location}}</p>
                    <p>Price: £{{lesson.price}}</p>
                    <p>Space: {{lesson.spaces}}</p>
                    <button @click='addToCart(lesson)' :disabled="lesson.spaces == 0">Add To Cart</button>
                    <span id="lesson-sold-out" v-if="lesson.spaces == 0">Sold Out!</span>
                </div>
            </div>   
        </div>

        <!-- checkout -->
        <div v-else>
            <p id="back-to-lesson-pointer" @click="showLesson = true"><-- Go Back to Lessons</p>
            <div id="checkout-container" v-if="cart.length >= 1" v-for="item in cart">
                <img id="checkout-img" v-bind:src="item.image">
                <p>Subject: {{item.subject}}</p>
                <p>Location: {{item.location}}</p>
                <p>Price: £{{item.price}}</p> 
                <button @click='removeItem(item)'>Remove Item</button>
            </div>

            <!-- checkout form -->
            <div id="checkout-details">
                <input type="text" v-model.trim=checkout.name placeholder="Name">
                <input type="text" v-model.trim=checkout.phoneNumber placeholder="Phone Number">
                <button @click='alertOrder()' :disabled="!validateOrder">Checkout</button>
            </div>

        </div>
        

    </div>

    <script src="assets/js/lessons.js"></script>
    <script src="assets/js/vue.js"></script>
    <script src="assets/js/checkout.js"></script>
</body>
</html>